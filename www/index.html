<html>
  <!-- <style>
    table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
    }

    td,
    th {
      border: 1px solid #000000;
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even) {
      background-color: #dddddd;
    }
  </style> -->
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="style.css" />

    <title>Tables</title>
    <script src="/rtl/jquery.js"></script>
    <script src="/rtl/smq.js"></script>
    <script>
      $(function () {
        var smq = SMQ.Client(SMQ.wsURL("/QPCSBroker/"));
        // var smq = SMQ.Client("wss://simplemq.com/smq.lsp");

        function insertRow(time, state, elapsed) {
          var table = document.getElementById("myTable");
          var row = table.insertRow(table.rows.length);
          var cell1 = row.insertCell(0);
          var cell2 = row.insertCell(1);
          var cell3 = row.insertCell(2);
          cell1.innerHTML = time;
          cell2.innerHTML = state;
          cell3.innerHTML = elapsed;
        }

        function onValueUpdate(msg, ftid) {
          console.log("received: ", msg);
          insertRow(msg.time, msg.state, msg.elapsed);
        }

        smq.subscribe("tableView", { onmsg: onValueUpdate, datatype: "json" });
      });
    </script>
  </head>

  <body>
    <header class="header">
      <div class="header__content">
        <!-- <a class="logo"> </a> -->

        <nav class="nav">
          <ul class="nav__list">
            <li class="nav__item">
              <a class="active" href="#">Tables</a>
            </li>
            <li class="nav__item">
              <a class="nav__link" href="stim.html">STIM</a>
            </li>
            <li class="nav__item">
              <a class="nav__link" href="chat.html">Chat</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <h1 style="margin: 3%">ESS Viewer</h1>

    <section class="table__body">
      <table>
        <thead>
          <tr>
            <th>Time</th>
            <th>State</th>
            <th>Elapsed</th>
          </tr>
        </thead>
        <tbody id="myTable"></tbody>
      </table>
    </section>
  </body>
</html>
